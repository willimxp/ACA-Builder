# 技术债分析报告: panel.py

## 1. 文件概览
- **文件路径**: `panel.py`
- **主要功能**: 定义 Blender UI 面板（Sidebar），处理用户交互界面。
- **代码规模**: 约 1500+ 行。

## 2. 主要技术债

### 2.1 UI 代码与业务逻辑耦合
- **问题描述**: `poll` 函数（判断面板是否显示）中包含了很多业务状态的检查逻辑。按钮的 `operator` 调用直接依赖于具体的 Operator 类名字符串。
- **影响**: 修改业务逻辑（如新增一种建筑类型）时，必须同步修改 UI 代码，违反了关注点分离原则。

### 2.2 巨型类 (Large Class)
- **问题描述**: `ACA_PT_basic` 等类包含了过多的 `draw` 逻辑。所有的 UI 元素（按钮、滑块、复选框）都堆砌在一个文件中。
- **影响**: 代码难以阅读，界面布局调整困难。

### 2.3 硬编码的布局参数
- **问题描述**: 界面布局（Row, Column, Split）充满了硬编码的参数。
- **影响**: 在不同分辨率或 DPI 设置下，界面显示效果可能不一致。

### 2.4 缺乏动态构建
- **问题描述**: 所有的菜单项都是静态定义的。如果想根据配置文件动态生成 UI（如支持第三方资产包），目前的架构不支持。

## 3. 改进建议
1.  **UI 组件化**: 将复杂的面板拆分为多个小的子面板类。
2.  **配置驱动 UI**: 尝试通过读取属性定义（Property Group）自动生成 UI，减少手写 layout 代码。
3.  **逻辑解耦**: 将状态检查逻辑移至 Context 或 Utilities 中。
